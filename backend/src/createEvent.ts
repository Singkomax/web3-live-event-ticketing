import * as dotenv from 'dotenv';
import { ethers } from 'ethers';

dotenv.config();

const contractAbi = [
  {
    type: 'constructor',
    inputs: [
      { name: '_eventName', type: 'string', internalType: 'string' },
      {
        name: '_eventDescription',
        type: 'string',
        internalType: 'string',
      },
      { name: '_eventDate', type: 'uint256', internalType: 'uint256' },
      {
        name: '_eventOrganizer',
        type: 'address',
        internalType: 'address',
      },
      { name: '_baseURI', type: 'string', internalType: 'string' },
    ],
    stateMutability: 'nonpayable',
  },
  {
    type: 'function',
    name: 'approve',
    inputs: [
      { name: 'to', type: 'address', internalType: 'address' },
      { name: 'tokenId', type: 'uint256', internalType: 'uint256' },
    ],
    outputs: [],
    stateMutability: 'nonpayable',
  },
  {
    type: 'function',
    name: 'balanceOf',
    inputs: [{ name: 'owner', type: 'address', internalType: 'address' }],
    outputs: [{ name: '', type: 'uint256', internalType: 'uint256' }],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'eventDate',
    inputs: [],
    outputs: [{ name: '', type: 'uint256', internalType: 'uint256' }],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'eventDescription',
    inputs: [],
    outputs: [{ name: '', type: 'string', internalType: 'string' }],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'eventOrganizer',
    inputs: [],
    outputs: [{ name: '', type: 'address', internalType: 'address' }],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'getApproved',
    inputs: [{ name: 'tokenId', type: 'uint256', internalType: 'uint256' }],
    outputs: [{ name: '', type: 'address', internalType: 'address' }],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'isApprovedForAll',
    inputs: [
      { name: 'owner', type: 'address', internalType: 'address' },
      { name: 'operator', type: 'address', internalType: 'address' },
    ],
    outputs: [{ name: '', type: 'bool', internalType: 'bool' }],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'mintTickets',
    inputs: [
      {
        name: '_ticketTypes',
        type: 'tuple[]',
        internalType: 'struct EventTicket.TicketType[]',
        components: [
          { name: 'name', type: 'string', internalType: 'string' },
          { name: 'price', type: 'uint256', internalType: 'uint256' },
          { name: 'quantity', type: 'uint256', internalType: 'uint256' },
        ],
      },
    ],
    outputs: [],
    stateMutability: 'nonpayable',
  },
  {
    type: 'function',
    name: 'name',
    inputs: [],
    outputs: [{ name: '', type: 'string', internalType: 'string' }],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'owner',
    inputs: [],
    outputs: [{ name: '', type: 'address', internalType: 'address' }],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'ownerOf',
    inputs: [{ name: 'tokenId', type: 'uint256', internalType: 'uint256' }],
    outputs: [{ name: '', type: 'address', internalType: 'address' }],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'renounceOwnership',
    inputs: [],
    outputs: [],
    stateMutability: 'nonpayable',
  },
  {
    type: 'function',
    name: 'safeTransferFrom',
    inputs: [
      { name: 'from', type: 'address', internalType: 'address' },
      { name: 'to', type: 'address', internalType: 'address' },
      { name: 'tokenId', type: 'uint256', internalType: 'uint256' },
    ],
    outputs: [],
    stateMutability: 'nonpayable',
  },
  {
    type: 'function',
    name: 'safeTransferFrom',
    inputs: [
      { name: 'from', type: 'address', internalType: 'address' },
      { name: 'to', type: 'address', internalType: 'address' },
      { name: 'tokenId', type: 'uint256', internalType: 'uint256' },
      { name: 'data', type: 'bytes', internalType: 'bytes' },
    ],
    outputs: [],
    stateMutability: 'nonpayable',
  },
  {
    type: 'function',
    name: 'setApprovalForAll',
    inputs: [
      { name: 'operator', type: 'address', internalType: 'address' },
      { name: 'approved', type: 'bool', internalType: 'bool' },
    ],
    outputs: [],
    stateMutability: 'nonpayable',
  },
  {
    type: 'function',
    name: 'supportsInterface',
    inputs: [{ name: 'interfaceId', type: 'bytes4', internalType: 'bytes4' }],
    outputs: [{ name: '', type: 'bool', internalType: 'bool' }],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'symbol',
    inputs: [],
    outputs: [{ name: '', type: 'string', internalType: 'string' }],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'ticketTypeOfToken',
    inputs: [{ name: '', type: 'uint256', internalType: 'uint256' }],
    outputs: [{ name: '', type: 'string', internalType: 'string' }],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'ticketTypes',
    inputs: [{ name: '', type: 'string', internalType: 'string' }],
    outputs: [
      { name: 'name', type: 'string', internalType: 'string' },
      { name: 'price', type: 'uint256', internalType: 'uint256' },
      { name: 'quantity', type: 'uint256', internalType: 'uint256' },
    ],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'tokenURI',
    inputs: [{ name: 'tokenId', type: 'uint256', internalType: 'uint256' }],
    outputs: [{ name: '', type: 'string', internalType: 'string' }],
    stateMutability: 'view',
  },
  {
    type: 'function',
    name: 'transferFrom',
    inputs: [
      { name: 'from', type: 'address', internalType: 'address' },
      { name: 'to', type: 'address', internalType: 'address' },
      { name: 'tokenId', type: 'uint256', internalType: 'uint256' },
    ],
    outputs: [],
    stateMutability: 'nonpayable',
  },
  {
    type: 'function',
    name: 'transferOwnership',
    inputs: [{ name: 'newOwner', type: 'address', internalType: 'address' }],
    outputs: [],
    stateMutability: 'nonpayable',
  },
  {
    type: 'event',
    name: 'Approval',
    inputs: [
      {
        name: 'owner',
        type: 'address',
        indexed: true,
        internalType: 'address',
      },
      {
        name: 'approved',
        type: 'address',
        indexed: true,
        internalType: 'address',
      },
      {
        name: 'tokenId',
        type: 'uint256',
        indexed: true,
        internalType: 'uint256',
      },
    ],
    anonymous: false,
  },
  {
    type: 'event',
    name: 'ApprovalForAll',
    inputs: [
      {
        name: 'owner',
        type: 'address',
        indexed: true,
        internalType: 'address',
      },
      {
        name: 'operator',
        type: 'address',
        indexed: true,
        internalType: 'address',
      },
      {
        name: 'approved',
        type: 'bool',
        indexed: false,
        internalType: 'bool',
      },
    ],
    anonymous: false,
  },
  {
    type: 'event',
    name: 'BatchMetadataUpdate',
    inputs: [
      {
        name: '_fromTokenId',
        type: 'uint256',
        indexed: false,
        internalType: 'uint256',
      },
      {
        name: '_toTokenId',
        type: 'uint256',
        indexed: false,
        internalType: 'uint256',
      },
    ],
    anonymous: false,
  },
  {
    type: 'event',
    name: 'MetadataUpdate',
    inputs: [
      {
        name: '_tokenId',
        type: 'uint256',
        indexed: false,
        internalType: 'uint256',
      },
    ],
    anonymous: false,
  },
  {
    type: 'event',
    name: 'OwnershipTransferred',
    inputs: [
      {
        name: 'previousOwner',
        type: 'address',
        indexed: true,
        internalType: 'address',
      },
      {
        name: 'newOwner',
        type: 'address',
        indexed: true,
        internalType: 'address',
      },
    ],
    anonymous: false,
  },
  {
    type: 'event',
    name: 'Transfer',
    inputs: [
      {
        name: 'from',
        type: 'address',
        indexed: true,
        internalType: 'address',
      },
      {
        name: 'to',
        type: 'address',
        indexed: true,
        internalType: 'address',
      },
      {
        name: 'tokenId',
        type: 'uint256',
        indexed: true,
        internalType: 'uint256',
      },
    ],
    anonymous: false,
  },
  {
    type: 'error',
    name: 'ERC721IncorrectOwner',
    inputs: [
      { name: 'sender', type: 'address', internalType: 'address' },
      { name: 'tokenId', type: 'uint256', internalType: 'uint256' },
      { name: 'owner', type: 'address', internalType: 'address' },
    ],
  },
  {
    type: 'error',
    name: 'ERC721InsufficientApproval',
    inputs: [
      { name: 'operator', type: 'address', internalType: 'address' },
      { name: 'tokenId', type: 'uint256', internalType: 'uint256' },
    ],
  },
  {
    type: 'error',
    name: 'ERC721InvalidApprover',
    inputs: [{ name: 'approver', type: 'address', internalType: 'address' }],
  },
  {
    type: 'error',
    name: 'ERC721InvalidOperator',
    inputs: [{ name: 'operator', type: 'address', internalType: 'address' }],
  },
  {
    type: 'error',
    name: 'ERC721InvalidOwner',
    inputs: [{ name: 'owner', type: 'address', internalType: 'address' }],
  },
  {
    type: 'error',
    name: 'ERC721InvalidReceiver',
    inputs: [{ name: 'receiver', type: 'address', internalType: 'address' }],
  },
  {
    type: 'error',
    name: 'ERC721InvalidSender',
    inputs: [{ name: 'sender', type: 'address', internalType: 'address' }],
  },
  {
    type: 'error',
    name: 'ERC721NonexistentToken',
    inputs: [{ name: 'tokenId', type: 'uint256', internalType: 'uint256' }],
  },
  {
    type: 'error',
    name: 'OwnableInvalidOwner',
    inputs: [{ name: 'owner', type: 'address', internalType: 'address' }],
  },
  {
    type: 'error',
    name: 'OwnableUnauthorizedAccount',
    inputs: [{ name: 'account', type: 'address', internalType: 'address' }],
  },
];

const contractBytecode = {
  object:
    '0x60806040523480156200001157600080fd5b5060405162001c8838038062001c8883398101604081905262000034916200020d565b60408051808201909152600381526211559560ea1b602082015282908690600062000060838262000359565b5060016200006f828262000359565b5050506001600160a01b038116620000a157604051631e4fbdf760e01b81526000600482015260240160405180910390fd5b620000ac81620000f6565b50600c620000bb858262000359565b50600d839055600e80546001600160a01b0319166001600160a01b0384161790556009620000ea828262000359565b50505050505062000425565b600780546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b634e487b7160e01b600052604160045260246000fd5b600082601f8301126200017057600080fd5b81516001600160401b03808211156200018d576200018d62000148565b604051601f8301601f19908116603f01168101908282118183101715620001b857620001b862000148565b81604052838152602092508683858801011115620001d557600080fd5b600091505b83821015620001f95785820183015181830184015290820190620001da565b600093810190920192909252949350505050565b600080600080600060a086880312156200022657600080fd5b85516001600160401b03808211156200023e57600080fd5b6200024c89838a016200015e565b965060208801519150808211156200026357600080fd5b6200027189838a016200015e565b604089015160608a0151919750955091506001600160a01b03821682146200029857600080fd5b608088015191935080821115620002ae57600080fd5b50620002bd888289016200015e565b9150509295509295909350565b600181811c90821680620002df57607f821691505b6020821081036200030057634e487b7160e01b600052602260045260246000fd5b50919050565b601f8211156200035457600081815260208120601f850160051c810160208610156200032f5750805b601f850160051c820191505b8181101562000350578281556001016200033b565b5050505b505050565b81516001600160401b0381111562000375576200037562000148565b6200038d81620003868454620002ca565b8462000306565b602080601f831160018114620003c55760008415620003ac5750858301515b600019600386901b1c1916600185901b17855562000350565b600085815260208120601f198616915b82811015620003f657888601518255948401946001909101908401620003d5565b5085821015620004155787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b61185380620004356000396000f3fe608060405234801561001057600080fd5b50600436106101425760003560e01c806370a08231116100b857806395d89b411161007c57806395d89b41146102a3578063a22cb465146102ab578063b88d4fde146102be578063c87b56dd146102d1578063e985e9c5146102e4578063f2fde38b146102f757600080fd5b806370a082311461025c578063715018a61461026f5780637514d7cb146102775780638da5cb5b1461028a5780639434571b1461029b57600080fd5b806323b872dd1161010a57806323b872dd146101d757806329ea0b28146101ea57806342842e0e1461020c5780634bfbe5df1461021f5780636352211e14610236578063690f0de41461024957600080fd5b806301ffc9a71461014757806306fdde031461016f578063081812fc14610184578063095ea7b3146101af5780631dd99119146101c4575b600080fd5b61015a61015536600461110b565b61030a565b60405190151581526020015b60405180910390f35b610177610335565b604051610166919061117f565b610197610192366004611192565b6103c7565b6040516001600160a01b039091168152602001610166565b6101c26101bd3660046111c7565b6103f0565b005b6101776101d2366004611192565b6103ff565b6101c26101e53660046111f1565b610499565b6101fd6101f8366004611315565b610529565b6040516101669392919061134a565b6101c261021a3660046111f1565b6105de565b610228600d5481565b604051908152602001610166565b610197610244366004611192565b6105fe565b6101c261025736600461136f565b610609565b61022861026a366004611479565b61079c565b6101c26107e4565b600e54610197906001600160a01b031681565b6007546001600160a01b0316610197565b6101776107f8565b610177610805565b6101c26102b9366004611494565b610814565b6101c26102cc3660046114d0565b61081f565b6101776102df366004611192565b610837565b61015a6102f236600461154c565b610911565b6101c2610305366004611479565b61093f565b60006001600160e01b03198216632483248360e11b148061032f575061032f8261097d565b92915050565b6060600080546103449061157f565b80601f01602080910402602001604051908101604052809291908181526020018280546103709061157f565b80156103bd5780601f10610392576101008083540402835291602001916103bd565b820191906000526020600020905b8154815290600101906020018083116103a057829003601f168201915b5050505050905090565b60006103d2826109cd565b506000828152600460205260409020546001600160a01b031661032f565b6103fb828233610a06565b5050565b600b60205260009081526040902080546104189061157f565b80601f01602080910402602001604051908101604052809291908181526020018280546104449061157f565b80156104915780601f1061046657610100808354040283529160200191610491565b820191906000526020600020905b81548152906001019060200180831161047457829003601f168201915b505050505081565b6001600160a01b0382166104c857604051633250574960e11b8152600060048201526024015b60405180910390fd5b60006104d5838333610a13565b9050836001600160a01b0316816001600160a01b031614610523576040516364283d7b60e01b81526001600160a01b03808616600483015260248201849052821660448201526064016104bf565b50505050565b8051602081830181018051600a8252928201919093012091528054819061054f9061157f565b80601f016020809104026020016040519081016040528092919081815260200182805461057b9061157f565b80156105c85780601f1061059d576101008083540402835291602001916105c8565b820191906000526020600020905b8154815290600101906020018083116105ab57829003601f168201915b5050505050908060010154908060020154905083565b6105f98383836040518060200160405280600081525061081f565b505050565b600061032f826109cd565b610611610b0c565b6008541561065a5760405162461bcd60e51b8152602060048201526016602482015275151a58dad95d1cc8185b1c9958591e481b5a5b9d195960521b60448201526064016104bf565b60005b81518110156103fb57818181518110610678576106786115b9565b6020026020010151600a838381518110610694576106946115b9565b6020026020010151600001516040516106ad91906115cf565b908152604051908190036020019020815181906106ca9082611631565b506020820151600182015560409091015160029091015560005b8282815181106106f6576106f66115b9565b6020026020010151604001518110156107895760088054906000610719836116f1565b9091555050600e54600854610737916001600160a01b031690610b39565b828281518110610749576107496115b9565b602002602001015160000151600b6000600854815260200190815260200160002090816107769190611631565b5080610781816116f1565b9150506106e4565b5080610794816116f1565b91505061065d565b60006001600160a01b0382166107c8576040516322718ad960e21b8152600060048201526024016104bf565b506001600160a01b031660009081526003602052604090205490565b6107ec610b0c565b6107f66000610b9e565b565b600c80546104189061157f565b6060600180546103449061157f565b6103fb338383610bf0565b61082a848484610499565b6105233385858585610c8f565b6060610842826109cd565b506000828152600b60205260408120805461085c9061157f565b80601f01602080910402602001604051908101604052809291908181526020018280546108889061157f565b80156108d55780601f106108aa576101008083540402835291602001916108d5565b820191906000526020600020905b8154815290600101906020018083116108b857829003601f168201915b505050505090506009816108e885610dba565b6040516020016108fa93929190611718565b604051602081830303815290604052915050919050565b6001600160a01b03918216600090815260056020908152604080832093909416825291909152205460ff1690565b610947610b0c565b6001600160a01b03811661097157604051631e4fbdf760e01b8152600060048201526024016104bf565b61097a81610b9e565b50565b60006001600160e01b031982166380ac58cd60e01b14806109ae57506001600160e01b03198216635b5e139f60e01b145b8061032f57506301ffc9a760e01b6001600160e01b031983161461032f565b6000818152600260205260408120546001600160a01b03168061032f57604051637e27328960e01b8152600481018490526024016104bf565b6105f98383836001610e4d565b6000828152600260205260408120546001600160a01b0390811690831615610a4057610a40818486610f53565b6001600160a01b03811615610a7e57610a5d600085600080610e4d565b6001600160a01b038116600090815260036020526040902080546000190190555b6001600160a01b03851615610aad576001600160a01b0385166000908152600360205260409020805460010190555b60008481526002602052604080822080546001600160a01b0319166001600160a01b0389811691821790925591518793918516917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef91a4949350505050565b6007546001600160a01b031633146107f65760405163118cdaa760e01b81523360048201526024016104bf565b6001600160a01b038216610b6357604051633250574960e11b8152600060048201526024016104bf565b6000610b7183836000610a13565b90506001600160a01b038116156105f9576040516339e3563760e11b8152600060048201526024016104bf565b600780546001600160a01b038381166001600160a01b0319831681179093556040519116919082907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a35050565b6001600160a01b038216610c2257604051630b61174360e31b81526001600160a01b03831660048201526024016104bf565b6001600160a01b03838116600081815260056020908152604080832094871680845294825291829020805460ff191686151590811790915591519182527f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31910160405180910390a3505050565b6001600160a01b0383163b15610db357604051630a85bd0160e11b81526001600160a01b0384169063150b7a0290610cd19088908890879087906004016117c3565b6020604051808303816000875af1925050508015610d0c575060408051601f3d908101601f19168201909252610d0991810190611800565b60015b610d75573d808015610d3a576040519150601f19603f3d011682016040523d82523d6000602084013e610d3f565b606091505b508051600003610d6d57604051633250574960e11b81526001600160a01b03851660048201526024016104bf565b805181602001fd5b6001600160e01b03198116630a85bd0160e11b14610db157604051633250574960e11b81526001600160a01b03851660048201526024016104bf565b505b5050505050565b60606000610dc783610fb7565b600101905060008167ffffffffffffffff811115610de757610de761122d565b6040519080825280601f01601f191660200182016040528015610e11576020820181803683370190505b5090508181016020015b600019016f181899199a1a9b1b9c1cb0b131b232b360811b600a86061a8153600a8504945084610e1b57509392505050565b8080610e6157506001600160a01b03821615155b15610f23576000610e71846109cd565b90506001600160a01b03831615801590610e9d5750826001600160a01b0316816001600160a01b031614155b8015610eb05750610eae8184610911565b155b15610ed95760405163a9fbf51f60e01b81526001600160a01b03841660048201526024016104bf565b8115610f215783856001600160a01b0316826001600160a01b03167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92560405160405180910390a45b505b5050600090815260046020526040902080546001600160a01b0319166001600160a01b0392909216919091179055565b610f5e83838361108f565b6105f9576001600160a01b038316610f8c57604051637e27328960e01b8152600481018290526024016104bf565b60405163177e802f60e01b81526001600160a01b0383166004820152602481018290526044016104bf565b60008072184f03e93ff9f4daa797ed6e38ed64bf6a1f0160401b8310610ff65772184f03e93ff9f4daa797ed6e38ed64bf6a1f0160401b830492506040015b6d04ee2d6d415b85acef81000000008310611022576d04ee2d6d415b85acef8100000000830492506020015b662386f26fc10000831061104057662386f26fc10000830492506010015b6305f5e1008310611058576305f5e100830492506008015b612710831061106c57612710830492506004015b6064831061107e576064830492506002015b600a831061032f5760010192915050565b60006001600160a01b038316158015906110ed5750826001600160a01b0316846001600160a01b031614806110c957506110c98484610911565b806110ed57506000828152600460205260409020546001600160a01b038481169116145b949350505050565b6001600160e01b03198116811461097a57600080fd5b60006020828403121561111d57600080fd5b8135611128816110f5565b9392505050565b60005b8381101561114a578181015183820152602001611132565b50506000910152565b6000815180845261116b81602086016020860161112f565b601f01601f19169290920160200192915050565b6020815260006111286020830184611153565b6000602082840312156111a457600080fd5b5035919050565b80356001600160a01b03811681146111c257600080fd5b919050565b600080604083850312156111da57600080fd5b6111e3836111ab565b946020939093013593505050565b60008060006060848603121561120657600080fd5b61120f846111ab565b925061121d602085016111ab565b9150604084013590509250925092565b634e487b7160e01b600052604160045260246000fd5b6040516060810167ffffffffffffffff811182821017156112665761126661122d565b60405290565b604051601f8201601f1916810167ffffffffffffffff811182821017156112955761129561122d565b604052919050565b600067ffffffffffffffff8311156112b7576112b761122d565b6112ca601f8401601f191660200161126c565b90508281528383830111156112de57600080fd5b828260208301376000602084830101529392505050565b600082601f83011261130657600080fd5b6111288383356020850161129d565b60006020828403121561132757600080fd5b813567ffffffffffffffff81111561133e57600080fd5b6110ed848285016112f5565b60608152600061135d6060830186611153565b60208301949094525060400152919050565b6000602080838503121561138257600080fd5b823567ffffffffffffffff8082111561139a57600080fd5b818501915085601f8301126113ae57600080fd5b8135818111156113c0576113c061122d565b8060051b6113cf85820161126c565b91825283810185019185810190898411156113e957600080fd5b86860192505b8383101561146c578235858111156114075760008081fd5b86016060818c03601f190181131561141f5760008081fd5b611427611243565b89830135888111156114395760008081fd5b6114478e8c838701016112f5565b8252506040838101358b830152919092013590820152825291860191908601906113ef565b9998505050505050505050565b60006020828403121561148b57600080fd5b611128826111ab565b600080604083850312156114a757600080fd5b6114b0836111ab565b9150602083013580151581146114c557600080fd5b809150509250929050565b600080600080608085870312156114e657600080fd5b6114ef856111ab565b93506114fd602086016111ab565b925060408501359150606085013567ffffffffffffffff81111561152057600080fd5b8501601f8101871361153157600080fd5b6115408782356020840161129d565b91505092959194509250565b6000806040838503121561155f57600080fd5b611568836111ab565b9150611576602084016111ab565b90509250929050565b600181811c9082168061159357607f821691505b6020821081036115b357634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052603260045260246000fd5b600082516115e181846020870161112f565b9190910192915050565b601f8211156105f957600081815260208120601f850160051c810160208610156116125750805b601f850160051c820191505b81811015610db15782815560010161161e565b815167ffffffffffffffff81111561164b5761164b61122d565b61165f81611659845461157f565b846115eb565b602080601f831160018114611694576000841561167c5750858301515b600019600386901b1c1916600185901b178555610db1565b600085815260208120601f198616915b828110156116c3578886015182559484019460019091019084016116a4565b50858210156116e15787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60006001820161171157634e487b7160e01b600052601160045260246000fd5b5060010190565b60008085546117268161157f565b6001828116801561173e576001811461175357611782565b60ff1984168752821515830287019450611782565b8960005260208060002060005b858110156117795781548a820152908401908201611760565b50505082870194505b5087519250611795838560208b0161112f565b602f60f81b939092019283528551916117b48382860160208a0161112f565b91909201019695505050505050565b6001600160a01b03858116825284166020820152604081018390526080606082018190526000906117f690830184611153565b9695505050505050565b60006020828403121561181257600080fd5b8151611128816110f556fea264697066735822122056d807720261a3367f46966234413cd61da1f1da4f65ff237b98c4c5aa36488f64736f6c63430008150033',
  sourceMap:
    '369:2029:42:-:0;;;1004:398;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1380:113:28;;;;;;;;;;;;-1:-1:-1;;;1380:113:28;;;;1224:15:42;;1197:10;;-1:-1:-1;1446:13:28;1197:10:42;-1:-1:-1;1446:13:28;:::i;:::-;-1:-1:-1;1469:7:28;:17;1479:7;1469;:17;:::i;:::-;-1:-1:-1;;;;;;;;1273:26:23;;1269:95;;1322:31;;-1:-1:-1;;;1322:31:23;;1350:1;1322:31;;;4727:51:44;4700:18;;1322:31:23;;;;;;;1269:95;1373:32;1392:12;1373:18;:32::i;:::-;-1:-1:-1;1251:16:42::2;:36;1270:17:::0;1251:16;:36:::2;:::i;:::-;-1:-1:-1::0;1297:9:42::2;:22:::0;;;1329:14:::2;:32:::0;;-1:-1:-1;;;;;;1329:32:42::2;-1:-1:-1::0;;;;;1329:32:42;::::2;;::::0;;1371:13:::2;:24;1387:8:::0;1371:13;:24:::2;:::i;:::-;;1004:398:::0;;;;;369:2029;;2912:187:23;3004:6;;;-1:-1:-1;;;;;3020:17:23;;;-1:-1:-1;;;;;;3020:17:23;;;;;;;3052:40;;3004:6;;;3020:17;3004:6;;3052:40;;2985:16;;3052:40;2975:124;2912:187;:::o;14:127:44:-;75:10;70:3;66:20;63:1;56:31;106:4;103:1;96:15;130:4;127:1;120:15;146:840;200:5;253:3;246:4;238:6;234:17;230:27;220:55;;271:1;268;261:12;220:55;294:13;;-1:-1:-1;;;;;356:10:44;;;353:36;;;369:18;;:::i;:::-;444:2;438:9;412:2;498:13;;-1:-1:-1;;494:22:44;;;518:2;490:31;486:40;474:53;;;542:18;;;562:22;;;539:46;536:72;;;588:18;;:::i;:::-;628:10;624:2;617:22;663:2;655:6;648:18;685:4;675:14;;730:3;725:2;720;712:6;708:15;704:24;701:33;698:53;;;747:1;744;737:12;698:53;769:1;760:10;;779:133;793:2;790:1;787:9;779:133;;;881:14;;;877:23;;871:30;850:14;;;846:23;;839:63;804:10;;;;779:133;;;954:1;932:15;;;928:24;;;921:35;;;;936:6;146:840;-1:-1:-1;;;;146:840:44:o;991:996::-;1127:6;1135;1143;1151;1159;1212:3;1200:9;1191:7;1187:23;1183:33;1180:53;;;1229:1;1226;1219:12;1180:53;1256:16;;-1:-1:-1;;;;;1321:14:44;;;1318:34;;;1348:1;1345;1338:12;1318:34;1371:61;1424:7;1415:6;1404:9;1400:22;1371:61;:::i;:::-;1361:71;;1478:2;1467:9;1463:18;1457:25;1441:41;;1507:2;1497:8;1494:16;1491:36;;;1523:1;1520;1513:12;1491:36;1546:63;1601:7;1590:8;1579:9;1575:24;1546:63;:::i;:::-;1649:2;1634:18;;1628:25;1696:2;1681:18;;1675:25;1536:73;;-1:-1:-1;1628:25:44;-1:-1:-1;1675:25:44;-1:-1:-1;;;;;;1729:31:44;;1719:42;;1709:70;;1775:1;1772;1765:12;1709:70;1849:3;1834:19;;1828:26;1798:5;;-1:-1:-1;1866:16:44;;;1863:36;;;1895:1;1892;1885:12;1863:36;;1918:63;1973:7;1962:8;1951:9;1947:24;1918:63;:::i;:::-;1908:73;;;991:996;;;;;;;;:::o;1992:380::-;2071:1;2067:12;;;;2114;;;2135:61;;2189:4;2181:6;2177:17;2167:27;;2135:61;2242:2;2234:6;2231:14;2211:18;2208:38;2205:161;;2288:10;2283:3;2279:20;2276:1;2269:31;2323:4;2320:1;2313:15;2351:4;2348:1;2341:15;2205:161;;1992:380;;;:::o;2503:545::-;2605:2;2600:3;2597:11;2594:448;;;2641:1;2666:5;2662:2;2655:17;2711:4;2707:2;2697:19;2781:2;2769:10;2765:19;2762:1;2758:27;2752:4;2748:38;2817:4;2805:10;2802:20;2799:47;;;-1:-1:-1;2840:4:44;2799:47;2895:2;2890:3;2886:12;2883:1;2879:20;2873:4;2869:31;2859:41;;2950:82;2968:2;2961:5;2958:13;2950:82;;;3013:17;;;2994:1;2983:13;2950:82;;;2954:3;;;2594:448;2503:545;;;:::o;3224:1352::-;3344:10;;-1:-1:-1;;;;;3366:30:44;;3363:56;;;3399:18;;:::i;:::-;3428:97;3518:6;3478:38;3510:4;3504:11;3478:38;:::i;:::-;3472:4;3428:97;:::i;:::-;3580:4;;3644:2;3633:14;;3661:1;3656:663;;;;4363:1;4380:6;4377:89;;;-1:-1:-1;4432:19:44;;;4426:26;4377:89;-1:-1:-1;;3181:1:44;3177:11;;;3173:24;3169:29;3159:40;3205:1;3201:11;;;3156:57;4479:81;;3626:944;;3656:663;2450:1;2443:14;;;2487:4;2474:18;;-1:-1:-1;;3692:20:44;;;3810:236;3824:7;3821:1;3818:14;3810:236;;;3913:19;;;3907:26;3892:42;;4005:27;;;;3973:1;3961:14;;;;3840:19;;3810:236;;;3814:3;4074:6;4065:7;4062:19;4059:201;;;4135:19;;;4129:26;-1:-1:-1;;4218:1:44;4214:14;;;4230:3;4210:24;4206:37;4202:42;4187:58;4172:74;;4059:201;-1:-1:-1;;;;;4306:1:44;4290:14;;;4286:22;4273:36;;-1:-1:-1;3224:1352:44:o;4581:203::-;369:2029:42;;;;;;',
  linkReferences: {},
};

export async function main(params: { user_data: any }) {
  const provider = new ethers.JsonRpcProvider(process.env.QUICKNODE_RPC_URL);

  const wallet = new ethers.Wallet(
    process.env.ADMIN_PRIVATE_KEY || 'letmeinplease',
    provider
  );

  const EventTicketNFT = new ethers.ContractFactory(
    contractAbi,
    contractBytecode,
    wallet
  );

  const contract = await EventTicketNFT.deploy(
    params.user_data.name,
    params.user_data.description,
    params.user_data.date,
    wallet.address,
    params.user_data.baseURI
  );

  await contract.waitForDeployment();

  return {
    contractAddress: await contract.getAddress(),
  };
}
